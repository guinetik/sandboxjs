<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Sandbox</title>
  <style>
    html,
    body {
      margin: 0;
      padding: 12px;
      font: 14px/1.4 -apple-system, system-ui, Segoe UI, Roboto
    }

    body {
      background: #fff;
      color: #111
    }
  </style>
</head>

<body>
  <script>
    //# sourceURL=sandbox-execution.js
    (function () {
      var SECRET = "{{SECRET}}";
      var send = function (type) {
        var args = Array.prototype.slice.call(arguments, 1);
        try { parent.postMessage({ __sandbox: true, secret: SECRET, type: type, args: args }, "*"); } catch (e) { }
      };
      ["log", "info", "warn", "error"].forEach ? ["log", "info", "warn", "error"].forEach(function (m) {
        var original = console[m].bind(console);
        console[m] = function () { send.apply(null, [m].concat([].slice.call(arguments))); try { original.apply(console, arguments); } catch (_) { } };
      }) : null;
      addEventListener("error", function (e) {
        send("error", (e.error && (e.error.stack || e.error.message)) || (e.message + " @" + e.filename + ":" + e.lineno + ":" + e.colno));
      });
      addEventListener("unhandledrejection", function (e) {
        var r = e.reason; send("error", "Unhandled rejection: " + (r && (r.stack || r.message) || String(r)));
      });
      try {
        {{USER_CODE}}
      } catch (err) {
        try { console.error(err); } catch (_) { }
      } finally {
        setTimeout(function () { send("done"); }, 0);
      }
    })();
  </script>
</body>

</html>